import React, { useEffect, useState } from 'react'
import userphoto from "../../Assets/Images/Rectangle 5.png"
import axios from 'axios';
const Profile = () => {
     const [myFav, setMyFav] = useState([]);
          const [profile, setProfile] = useState({});
  
          const getprofile = async () => {
          try {
              const response = await axios.get('http://localhost:8000/api/accounts/account-info/', {
                  headers: {
                      Authorization: `Bearer ${localStorage.getItem('token')}`,
                  },
              });
              console.log("✅ profile:", response.data);
              // بقیه کدها مثل setState یا نمایش داده‌ها...
              setProfile(response.data)
          } catch (error) {
              if (error.response) {
                  // خطاهایی که از سمت سرور اومدن (مثلاً 401، 403، 500)
                  console.error(`❌ Error ${error.response.status}:`, error.response.data);
  
                  if (error.response.status === 401) {
                      // مثلاً بفرستش به صفحه لاگین یا پیام بده
                      alert("دسترسی غیرمجاز. لطفاً دوباره لاگین کنید.");
                  }
  
              } else if (error.request) {
                  // درخواست فرستاده شده ولی پاسخی نگرفتیم
                  console.error("❌ No response from server:", error.request);
              } else {
                  // خطای مربوط به ساختار خود کد یا axios
                  console.error("❌ Request setup error:", error.message);
              }
          }
      };
     
      const getFavorites = async () => {
          try {
              const response = await axios.get('http://localhost:8000/api/accounts/favorites/', {
                  headers: {
                      Authorization: `Bearer ${localStorage.getItem('token')}`,
                  },
              });
              setMyFav(response.data)
              console.log("✅ Favorites:", response.data);
              // بقیه کدها مثل setState یا نمایش داده‌ها...
  
          } catch (error) {
              if (error.response) {
                  // خطاهایی که از سمت سرور اومدن (مثلاً 401، 403، 500)
                  console.error(`❌ Error ${error.response.status}:`, error.response.data);
  
                  if (error.response.status === 401) {
                      // مثلاً بفرستش به صفحه لاگین یا پیام بده
                      alert("دسترسی غیرمجاز. لطفاً دوباره لاگین کنید.");
                  }
  
              } else if (error.request) {
                  // درخواست فرستاده شده ولی پاسخی نگرفتیم
                  console.error("❌ No response from server:", error.request);
              } else {
                  // خطای مربوط به ساختار خود کد یا axios
                  console.error("❌ Request setup error:", error.message);
              }
          }
      };
      
       useEffect(() => {
          getprofile()
                    getFavorites()

      }, [])
      
      console.log(profile);
  return (
    <div className='lg:w-96  border border-solid border-[#EDEDED] rounded-2xl flex flex-col items-center py-6 px-8 '>
      
      <div className='text-center border-b border-solid border-[#EDEDED] w-[323px] flex flex-col items-center pb-1 mb-1'>
        <div className='relative mb-2'>
          <img src={userphoto} alt="" />
          <button className='absolute left-0 bottom-0 bg-[#B95962] p-2 rounded-full'>
            <svg width="24" height="24" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
              <path d="M17.2401 22.75H6.76005C3.96005 22.75 2.18005 21.08 2.02005 18.29L1.50005 10.04C1.42005 8.79 1.85005 7.59 2.71005 6.68C3.56005 5.77 4.76005 5.25 6.00005 5.25C6.32005 5.25 6.63005 5.06 6.78005 4.76L7.50005 3.33C8.09005 2.16 9.57005 1.25 10.8601 1.25H13.1501C14.4401 1.25 15.9101 2.16 16.5001 3.32L17.2201 4.78C17.3701 5.06 17.6701 5.25 18.0001 5.25C19.2401 5.25 20.4401 5.77 21.2901 6.68C22.1501 7.6 22.5801 8.79 22.5001 10.04L21.9801 18.3C21.8001 21.13 20.0701 22.75 17.2401 22.75ZM10.8601 2.75C10.1201 2.75 9.18005 3.33 8.84005 4L8.12005 5.44C7.70005 6.25 6.89005 6.75 6.00005 6.75C5.16005 6.75 4.38005 7.09 3.80005 7.7C3.23005 8.31 2.94005 9.11 3.00005 9.94L3.52005 18.2C3.64005 20.22 4.73005 21.25 6.76005 21.25H17.2401C19.2601 21.25 20.3501 20.22 20.4801 18.2L21.0001 9.94C21.0501 9.11 20.7701 8.31 20.2001 7.7C19.6201 7.09 18.8401 6.75 18.0001 6.75C17.1101 6.75 16.3001 6.25 15.8801 5.46L15.1501 4C14.8201 3.34 13.8801 2.76 13.1401 2.76H10.8601V2.75Z" fill="white" />
              <path d="M13.5 8.75H10.5C10.09 8.75 9.75 8.41 9.75 8C9.75 7.59 10.09 7.25 10.5 7.25H13.5C13.91 7.25 14.25 7.59 14.25 8C14.25 8.41 13.91 8.75 13.5 8.75Z" fill="white" />
              <path d="M12 18.75C9.79 18.75 8 16.96 8 14.75C8 12.54 9.79 10.75 12 10.75C14.21 10.75 16 12.54 16 14.75C16 16.96 14.21 18.75 12 18.75ZM12 12.25C10.62 12.25 9.5 13.37 9.5 14.75C9.5 16.13 10.62 17.25 12 17.25C13.38 17.25 14.5 16.13 14.5 14.75C14.5 13.37 13.38 12.25 12 12.25Z" fill="white" />
            </svg>

          </button>
        </div>

        <p className='text-[#434343] mb-1'>{profile.first_name} {profile.last_name}</p>
        <p className='text-[#656565]'>{profile.email}</p>
      </div>

      <div className='w-full text-[#434343] h-[132px] flex flex-col justify-evenly'>
        <p className='flex justify-between'>
          <span>اعتبار خرید</span>
          <span>۱۰۰,۰۰۰ تومان</span>
        </p>
        <p className='flex justify-between'>
          <span>تعداد طرح ها</span>
          <span>۴۵</span>
        </p>
        <p className='flex justify-between'>
          <span>تعداد سفارش ها</span>
          <span>۷۰</span>
        </p>
      </div>
      <div className='w-full  mt-2'>
        <div className='flex gap-1.5 border-b border-solid border-[#B95962] py-3 '>
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 18.75C11.59 18.75 11.25 18.41 11.25 18V15C11.25 14.59 11.59 14.25 12 14.25C12.41 14.25 12.75 14.59 12.75 15V18C12.75 18.41 12.41 18.75 12 18.75Z" fill="#B95962" />
            <path d="M17.6 22.5569H6.39996C4.57996 22.5569 2.91996 21.1569 2.61996 19.3669L1.28996 11.3969C1.06996 10.1569 1.67996 8.56689 2.66996 7.77689L9.59996 2.22689C10.94 1.14689 13.05 1.15689 14.4 2.23689L21.33 7.77689C22.31 8.56689 22.91 10.1569 22.71 11.3969L21.38 19.3569C21.08 21.1269 19.38 22.5569 17.6 22.5569ZM11.99 2.92689C11.46 2.92689 10.93 3.08689 10.54 3.39689L3.60996 8.95689C3.04996 9.40689 2.64996 10.4469 2.76996 11.1569L4.09996 19.1169C4.27996 20.1669 5.32996 21.0569 6.39996 21.0569H17.6C18.67 21.0569 19.72 20.1669 19.9 19.1069L21.23 11.1469C21.34 10.4469 20.94 9.38689 20.39 8.94689L13.46 3.40689C13.06 3.08689 12.52 2.92689 11.99 2.92689Z" fill="#B95962" />
          </svg>
          <p>داشبورد</p>
        </div>
        <div className='flex gap-1.5 border-b border-solid border-[#EDEDED] py-3 '>
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M15 22.75H9C3.57 22.75 1.25 20.43 1.25 15V9C1.25 3.57 3.57 1.25 9 1.25H15C20.43 1.25 22.75 3.57 22.75 9V15C22.75 20.43 20.43 22.75 15 22.75ZM9 2.75C4.39 2.75 2.75 4.39 2.75 9V15C2.75 19.61 4.39 21.25 9 21.25H15C19.61 21.25 21.25 19.61 21.25 15V9C21.25 4.39 19.61 2.75 15 2.75H9Z" fill="#434343" />
            <path d="M7.33011 15.242C7.17011 15.242 7.01011 15.192 6.87011 15.082C6.54011 14.832 6.48011 14.362 6.73011 14.032L9.11011 10.942C9.40011 10.572 9.81011 10.332 10.2801 10.272C10.7401 10.212 11.2101 10.342 11.5801 10.632L13.4101 12.072C13.4801 12.132 13.5501 12.132 13.6001 12.122C13.6401 12.122 13.7101 12.102 13.7701 12.022L16.0801 9.04196C16.3301 8.71196 16.8101 8.65196 17.1301 8.91196C17.4601 9.16196 17.5201 9.63196 17.2601 9.96196L14.9501 12.942C14.6601 13.312 14.2501 13.552 13.7801 13.602C13.3101 13.662 12.8501 13.532 12.4801 13.242L10.6501 11.802C10.5801 11.742 10.5001 11.742 10.4601 11.752C10.4201 11.752 10.3501 11.772 10.2901 11.852L7.91011 14.942C7.78011 15.142 7.56011 15.242 7.33011 15.242Z" fill="#434343" />
          </svg>

          <p>تاریخچه سفارشات</p>
        </div>
        <div className='flex gap-1.5 border-b border-solid border-[#EDEDED] py-3 '>
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M15 22.75H9C3.57 22.75 1.25 20.43 1.25 15V9C1.25 3.57 3.57 1.25 9 1.25H15C20.43 1.25 22.75 3.57 22.75 9V15C22.75 20.43 20.43 22.75 15 22.75ZM9 2.75C4.39 2.75 2.75 4.39 2.75 9V15C2.75 19.61 4.39 21.25 9 21.25H15C19.61 21.25 21.25 19.61 21.25 15V9C21.25 4.39 19.61 2.75 15 2.75H9Z" fill="#434343" />
            <path d="M7.33011 15.242C7.17011 15.242 7.01011 15.192 6.87011 15.082C6.54011 14.832 6.48011 14.362 6.73011 14.032L9.11011 10.942C9.40011 10.572 9.81011 10.332 10.2801 10.272C10.7401 10.212 11.2101 10.342 11.5801 10.632L13.4101 12.072C13.4801 12.132 13.5501 12.132 13.6001 12.122C13.6401 12.122 13.7101 12.102 13.7701 12.022L16.0801 9.04196C16.3301 8.71196 16.8101 8.65196 17.1301 8.91196C17.4601 9.16196 17.5201 9.63196 17.2601 9.96196L14.9501 12.942C14.6601 13.312 14.2501 13.552 13.7801 13.602C13.3101 13.662 12.8501 13.532 12.4801 13.242L10.6501 11.802C10.5801 11.742 10.5001 11.742 10.4601 11.752C10.4201 11.752 10.3501 11.772 10.2901 11.852L7.91011 14.942C7.78011 15.142 7.56011 15.242 7.33011 15.242Z" fill="#434343" />
          </svg>

          <p>گالری</p>
        </div>
        <div className='flex gap-1.5 border-b border-solid border-[#EDEDED] py-3 '>
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M15 22.75H9C3.57 22.75 1.25 20.43 1.25 15V9C1.25 3.57 3.57 1.25 9 1.25H15C20.43 1.25 22.75 3.57 22.75 9V15C22.75 20.43 20.43 22.75 15 22.75ZM9 2.75C4.39 2.75 2.75 4.39 2.75 9V15C2.75 19.61 4.39 21.25 9 21.25H15C19.61 21.25 21.25 19.61 21.25 15V9C21.25 4.39 19.61 2.75 15 2.75H9Z" fill="#434343" />
            <path d="M7.33011 15.242C7.17011 15.242 7.01011 15.192 6.87011 15.082C6.54011 14.832 6.48011 14.362 6.73011 14.032L9.11011 10.942C9.40011 10.572 9.81011 10.332 10.2801 10.272C10.7401 10.212 11.2101 10.342 11.5801 10.632L13.4101 12.072C13.4801 12.132 13.5501 12.132 13.6001 12.122C13.6401 12.122 13.7101 12.102 13.7701 12.022L16.0801 9.04196C16.3301 8.71196 16.8101 8.65196 17.1301 8.91196C17.4601 9.16196 17.5201 9.63196 17.2601 9.96196L14.9501 12.942C14.6601 13.312 14.2501 13.552 13.7801 13.602C13.3101 13.662 12.8501 13.532 12.4801 13.242L10.6501 11.802C10.5801 11.742 10.5001 11.742 10.4601 11.752C10.4201 11.752 10.3501 11.772 10.2901 11.852L7.91011 14.942C7.78011 15.142 7.56011 15.242 7.33011 15.242Z" fill="#434343" />
          </svg>

          <p>آدرس ها</p>
        </div>
        <div className='flex gap-1.5 border-b border-solid border-[#EDEDED] py-3 '>
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M15 22.75H9C3.57 22.75 1.25 20.43 1.25 15V9C1.25 3.57 3.57 1.25 9 1.25H15C20.43 1.25 22.75 3.57 22.75 9V15C22.75 20.43 20.43 22.75 15 22.75ZM9 2.75C4.39 2.75 2.75 4.39 2.75 9V15C2.75 19.61 4.39 21.25 9 21.25H15C19.61 21.25 21.25 19.61 21.25 15V9C21.25 4.39 19.61 2.75 15 2.75H9Z" fill="#434343" />
            <path d="M7.33011 15.242C7.17011 15.242 7.01011 15.192 6.87011 15.082C6.54011 14.832 6.48011 14.362 6.73011 14.032L9.11011 10.942C9.40011 10.572 9.81011 10.332 10.2801 10.272C10.7401 10.212 11.2101 10.342 11.5801 10.632L13.4101 12.072C13.4801 12.132 13.5501 12.132 13.6001 12.122C13.6401 12.122 13.7101 12.102 13.7701 12.022L16.0801 9.04196C16.3301 8.71196 16.8101 8.65196 17.1301 8.91196C17.4601 9.16196 17.5201 9.63196 17.2601 9.96196L14.9501 12.942C14.6601 13.312 14.2501 13.552 13.7801 13.602C13.3101 13.662 12.8501 13.532 12.4801 13.242L10.6501 11.802C10.5801 11.742 10.5001 11.742 10.4601 11.752C10.4201 11.752 10.3501 11.772 10.2901 11.852L7.91011 14.942C7.78011 15.142 7.56011 15.242 7.33011 15.242Z" fill="#434343" />
          </svg>

          <p>دنبال شوندگان</p>
        </div>
        <div className='flex gap-1.5 border-b border-solid border-[#EDEDED] py-3 '>
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M15 22.75H9C3.57 22.75 1.25 20.43 1.25 15V9C1.25 3.57 3.57 1.25 9 1.25H15C20.43 1.25 22.75 3.57 22.75 9V15C22.75 20.43 20.43 22.75 15 22.75ZM9 2.75C4.39 2.75 2.75 4.39 2.75 9V15C2.75 19.61 4.39 21.25 9 21.25H15C19.61 21.25 21.25 19.61 21.25 15V9C21.25 4.39 19.61 2.75 15 2.75H9Z" fill="#434343" />
            <path d="M7.33011 15.242C7.17011 15.242 7.01011 15.192 6.87011 15.082C6.54011 14.832 6.48011 14.362 6.73011 14.032L9.11011 10.942C9.40011 10.572 9.81011 10.332 10.2801 10.272C10.7401 10.212 11.2101 10.342 11.5801 10.632L13.4101 12.072C13.4801 12.132 13.5501 12.132 13.6001 12.122C13.6401 12.122 13.7101 12.102 13.7701 12.022L16.0801 9.04196C16.3301 8.71196 16.8101 8.65196 17.1301 8.91196C17.4601 9.16196 17.5201 9.63196 17.2601 9.96196L14.9501 12.942C14.6601 13.312 14.2501 13.552 13.7801 13.602C13.3101 13.662 12.8501 13.532 12.4801 13.242L10.6501 11.802C10.5801 11.742 10.5001 11.742 10.4601 11.752C10.4201 11.752 10.3501 11.772 10.2901 11.852L7.91011 14.942C7.78011 15.142 7.56011 15.242 7.33011 15.242Z" fill="#434343" />
          </svg>

          <p>اطلاعات حساب کاربری</p>
        </div>
        <div className='flex gap-1.5 border-b border-solid border-[#EDEDED] py-3 '>
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M15 22.75H9C3.57 22.75 1.25 20.43 1.25 15V9C1.25 3.57 3.57 1.25 9 1.25H15C20.43 1.25 22.75 3.57 22.75 9V15C22.75 20.43 20.43 22.75 15 22.75ZM9 2.75C4.39 2.75 2.75 4.39 2.75 9V15C2.75 19.61 4.39 21.25 9 21.25H15C19.61 21.25 21.25 19.61 21.25 15V9C21.25 4.39 19.61 2.75 15 2.75H9Z" fill="#434343" />
            <path d="M7.33011 15.242C7.17011 15.242 7.01011 15.192 6.87011 15.082C6.54011 14.832 6.48011 14.362 6.73011 14.032L9.11011 10.942C9.40011 10.572 9.81011 10.332 10.2801 10.272C10.7401 10.212 11.2101 10.342 11.5801 10.632L13.4101 12.072C13.4801 12.132 13.5501 12.132 13.6001 12.122C13.6401 12.122 13.7101 12.102 13.7701 12.022L16.0801 9.04196C16.3301 8.71196 16.8101 8.65196 17.1301 8.91196C17.4601 9.16196 17.5201 9.63196 17.2601 9.96196L14.9501 12.942C14.6601 13.312 14.2501 13.552 13.7801 13.602C13.3101 13.662 12.8501 13.532 12.4801 13.242L10.6501 11.802C10.5801 11.742 10.5001 11.742 10.4601 11.752C10.4201 11.752 10.3501 11.772 10.2901 11.852L7.91011 14.942C7.78011 15.142 7.56011 15.242 7.33011 15.242Z" fill="#434343" />
          </svg>

          <p>خروج</p>
        </div>
      </div>
    </div>
  )
}

export default Profile